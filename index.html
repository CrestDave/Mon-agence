<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DOKLADSERVIS SK | Portál</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --primary: #051c33; --accent: #0052cc; --success: #2ecc71; --error: #e74c3c; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Montserrat', sans-serif; background: #fff; color: var(--primary); line-height: 1.6; }

        /* Barre Cinéma */
        #global-bar { position: fixed; top: 0; left: 0; width: 33%; height: 3px; background: var(--accent); z-index: 1000; transition: width 0.8s ease; }

        .container { width: 100%; max-width: 800px; margin: 0 auto; padding: 40px 20px; }
        .center { text-align: center; }

        /* Accueil */
        .welcome-box { margin: 30px 0; font-size: 0.95rem; color: #555; text-align: justify; }
        .input-box { position: relative; margin: 30px auto; max-width: 400px; border-bottom: 2px solid #eee; }
        .input-box i { position: absolute; left: 10px; top: 15px; color: #ccc; }
        input { width: 100%; padding: 15px 15px 15px 40px; border: none; font-family: 'Roboto Mono'; font-size: 1.1rem; outline: none; }

        .btn-auth { background: var(--primary); color: white; padding: 18px; width: 100%; max-width: 400px; border: none; font-weight: bold; cursor: pointer; letter-spacing: 1px; }

        /* Animation Recherche */
        #search-step { display: none; padding: 60px 0; }
        .loader { width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid var(--success); border-radius: 50%; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Certification */
        #cert-step { display: none; }
        .check-icon { width: 70px; height: 70px; background: var(--success); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 35px; margin: 0 auto 15px; }
        .title-success { font-size: 1.8rem; font-weight: 900; color: var(--primary); margin-bottom: 30px; }

        .info-grid { border-top: 1px solid #eee; margin: 20px 0; text-align: left; }
        .info-row { padding: 15px 0; border-bottom: 1px solid #f9f9f9; display: flex; justify-content: space-between; font-size: 1rem; }
        .label { font-weight: bold; color: #7f8c8d; text-transform: uppercase; font-size: 0.85rem; }
        .value { font-weight: 700; color: var(--primary); }

        /* Bouton Spinner PDF */
        .btn-spinner {
            display: inline-block; margin: 30px 0; padding: 20px;
            border: 2px solid var(--accent); color: var(--accent);
            border-radius: 50px; font-weight: bold; text-decoration: none;
            transition: 0.3s; animation: pulse 2s infinite; cursor: pointer;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* Viewer PDF & Scan */
        #pdf-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 2000; overflow-y: auto; padding: 20px; }
        .pdf-wrapper { position: relative; width: 100%; max-width: 700px; margin: 0 auto; overflow: hidden; }
        #pdf-img { width: 100%; display: block; filter: blur(20px); transition: filter 0.1s; }
        #scan-line { position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: #00f2ff; box-shadow: 0 0 15px #00f2ff; z-index: 2001; display: none; }

        /* Feedback */
        .feedback-card { background: #f8f9fa; padding: 25px; border-radius: 8px; margin-top: 40px; }
        textarea { width: 100%; height: 100px; padding: 10px; margin: 15px 0; border: 1px solid #ddd; border-radius: 4px; }
    </style>
</head>
<body>

<div id="global-bar"></div>

<div class="container center">
    <div id="auth-step">
        <img src="https://upload.wikimedia.org/wikipedia/commons/d/d2/Coat_of_arms_of_Slovakia.svg" style="width:60px;">
        <h1 style="margin:15px 0 5px;">DOKLADSERVIS SK</h1>
        <p style="color:#999; font-family:'Roboto Mono'; font-size:0.8rem;">ID: SK-SBKSIV</p>

        <div class="welcome-box">
            Vítame Vás na oficiálnom štátnom portáli Slovenskej republiky pre digitálnu verifikáciu dokumentov. Tento systém slúži na okamžité overenie pravosti certifikátov. Všetky prenosy sú chránené kryptografickým protokolom AES-256.
        </div>

        <div class="input-box">
            <i class="fas fa-shield-alt"></i>
            <input type="text" id="code-in" placeholder="ZADAJTE KÓD">
        </div>
        <button class="btn-auth" onclick="handleVerify()">AUTENTIFIKOVAŤ PRÍSTUP</button>
        <p id="error-txt" style="color:var(--error); margin-top:15px; font-weight:bold;"></p>
    </div>

    <div id="search-step">
        <div class="loader"></div>
        <h2>VYHĽADÁVANIE...</h2>
        <p id="status-msg">Pripájanie k centrálnemu registru...</p>
    </div>

    <div id="cert-step">
        <div class="check-icon"><i class="fas fa-check"></i></div>
        <h1 class="title-success">VÉRIFICATION RÉUSSIE</h1>

        <div class="info-grid">
            <div class="info-row"><span class="label">Identifikátor:</span><span class="value">SK-DS-2025-8412</span></div>
            <div class="info-row"><span class="label">Držiteľ:</span><span class="value">Zuzana Nováková</span></div>
            <div class="info-row"><span class="label">Miesto:</span><span class="value">Bratislava, SK</span></div>
            <div class="info-row"><span class="label">Dátum:</span><span class="value">19.01.2026</span></div>
            <div class="info-row"><span class="label">Stav:</span><span class="value" style="color:var(--success)">AKTÍVNY / PLATNÝ</span></div>
        </div>

        <div class="btn-spinner" onclick="startScan()">
            <i class="fas fa-sync-alt fa-spin"></i> &nbsp; ZOBRAZIŤ CERTIFIKÁT (PDF)
        </div>

        <div class="feedback-card">
            <h3>VALIDÁCIA FINÁLE</h3>
            <p style="font-size:0.85rem; color:#666;">Potvrďte správnosť údajov alebo nám pošlite váš názor:</p>
            <form action="https://formspree.io/f/xzddgpdn" method="POST" id="msg-form">
                <textarea name="message" id="msg-val" placeholder="Vaša správa..."></textarea>
                <p id="err-msg" style="color:var(--error); display:none; font-size:0.8rem;">Prosím, napíšte správu.</p>
                <button type="button" class="btn-auth" onclick="sendFeedback()">ODOSLAŤ VALIDÁCIU</button>
            </form>
        </div>
    </div>
</div>

<div id="pdf-overlay">
    <div class="pdf-wrapper" id="pdf-cont">
        <div id="scan-line"></div>
        <img src="moje_dokumenty/Potvrdenie_SK.pdf" id="pdf-img" onerror="this.src='https://via.placeholder.com/800x1100?text=NAČÍTAVANIE+DOKUMENTU...'">
    </div>
    <div class="center">
        <button class="btn-auth" style="background:var(--accent); margin-top:20px;" onclick="closeViewer()">SPÄŤ NA DETAIL</button>
    </div>
</div>

<audio id="beep" src="https://www.soundjay.com/buttons/beep-07.mp3"></audio>

<script>
    const KEY = "SK-2025-00-DS";
    let attempts = localStorage.getItem('tries_count') || 0;

    function handleVerify() {
        const val = document.getElementById('code-in').value.toUpperCase();
        if(val === KEY) {
            document.getElementById('auth-step').style.display = 'none';
            document.getElementById('search-step').style.display = 'block';
            document.getElementById('global-bar').style.width = '66%';
            
            setTimeout(() => { document.getElementById('status-msg').innerText = "Overovanie digitálneho certifikátu..."; }, 1500);
            setTimeout(() => {
                document.getElementById('search-step').style.display = 'none';
                document.getElementById('cert-step').style.display = 'block';
                document.getElementById('global-bar').style.width = '100%';
            }, 3500);
        } else {
            attempts++;
            localStorage.setItem('tries_count', attempts);
            document.getElementById('error-txt').innerText = "NESPRÁVNY KÓD. POKUSY: " + (3 - attempts);
            if(attempts >= 3) location.reload();
        }
    }

    function startScan() {
        const overlay = document.getElementById('pdf-overlay');
        const laser = document.getElementById('scan-line');
        const img = document.getElementById('pdf-img');
        
        overlay.style.display = 'block';
        laser.style.display = 'block';
        
        let pos = 0;
        let speed = 8;
        let height = document.getElementById('pdf-cont').offsetHeight;

        let interval = setInterval(() => {
            pos += speed;
            laser.style.top = pos + "px";
            
            // Dévoilement (on réduit le flou là où le laser passe)
            if(pos > height * 0.2) img.style.filter = "blur(10px)";
            if(pos > height * 0.5) img.style.filter = "blur(5px)";
            if(pos > height * 0.8) img.style.filter = "blur(0px)";

            if(pos >= height) {
                clearInterval(interval);
                laser.style.display = 'none';
                document.getElementById('beep').play();
            }
        }, 30);
    }

    function closeViewer() { document.getElementById('pdf-overlay').style.display = 'none'; }

    function sendFeedback() {
        const text = document.getElementById('msg-val').value.trim();
        if(!text) { document.getElementById('err-msg').style.display = 'block'; }
        else { document.getElementById('msg-form').submit(); }
    }
</script>
</body>
</html>